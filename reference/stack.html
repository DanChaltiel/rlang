<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Call stack information — stack • rlang</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Call stack information — stack" />
<meta property="og:description" content="
The eval_ and call_ families of functions provide a replacement
for the base R functions prefixed with sys. (which are all about
the context stack), as well as for parent.frame() (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.11.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/">Version 0.4.3</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/rlang-0-4-0/">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Call stack information</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/lifecycle-retired.R'><code>R/lifecycle-retired.R</code></a></small>
    <div class="hidden name"><code>stack.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href='https://lifecycle.r-lib.org/articles/stages.html#deprecated'><img src='figures/lifecycle-deprecated.svg' alt='[Deprecated]' /></a></p>
<p>The <code>eval_</code> and <code>call_</code> families of functions provide a replacement
for the base R functions prefixed with <code>sys.</code> (which are all about
the context stack), as well as for <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame()</a></code> (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous.</p>
    </div>

    <pre class="usage"><span class='fu'>global_frame</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>current_frame</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ctxt_frame</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>call_frame</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span>, clean <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>call_depth</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ctxt_stack</span><span class='op'>(</span>n <span class='op'>=</span> <span class='cn'>NULL</span>, trim <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>

<span class='fu'>call_stack</span><span class='op'>(</span>n <span class='op'>=</span> <span class='cn'>NULL</span>, clean <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of frames to go back in the stack.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Whether to post-process the call stack to clean
non-standard frames. If <code>TRUE</code>, suboptimal call-stack entries by
<code><a href='https://rdrr.io/r/base/eval.html'>base::eval()</a></code> will be cleaned up: the duplicate frame created by
<code><a href='https://rdrr.io/r/base/eval.html'>eval()</a></code> is eliminated.</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>The number of layers of intervening frames to trim off
the stack. See <code><a href='stack_trim.html'>stack_trim()</a></code> and examples.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ctxt_frame()</code> and <code>call_frame()</code> return a <code>frame</code> object
containing the following fields: <code>expr</code> and <code>env</code> (call expression
and evaluation environment), <code>pos</code> and <code>caller_pos</code> (position of
current frame in the context stack and position of the caller), and
<code>fun</code> (function of the current frame). <code>ctxt_stack()</code> and
<code>call_stack()</code> return a list of all context or call frames on the
stack. Finally, <code>ctxt_depth()</code> and <code>call_depth()</code> report the
current context position or the number of calling frames on the
stack.</p>
<p>The base R functions take two sorts of arguments to indicate which
frame to query: <code>which</code> and <code>n</code>. The <code>n</code> argument is
straightforward: it's the number of frames to go down the stack,
with <code>n = 1</code> referring to the current context. The <code>which</code> argument
is more complicated and changes meaning for values lower than 1.
For the sake of consistency, the rlang functions all take the
same kind of argument <code>n</code>. This argument has a single meaning (the
number of frames to go down the stack) and cannot be lower than 1.</p>
<p>Note finally that <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame(1)</a></code> corresponds to
<code>call_frame(2)$env</code>, as <code>n = 1</code> always refers to the current
frame. This makes the <code>_frame()</code> and <code>_stack()</code> functions
consistent: <code>ctxt_frame(2)</code> is the same as <code>ctxt_stack()[[2]]</code>.
Also, <code>ctxt_depth()</code> returns one more frame than
<code><a href='https://rdrr.io/r/base/sys.parent.html'>base::sys.nframe()</a></code> because it counts the global frame. That is
consistent with the <code>_stack()</code> functions which return the global
frame as well. This way, <code>call_stack(call_depth())</code> is the same as
<code>global_frame()</code>.</p>
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    


<p>These functions are soft-deprecated and replaced by <code><a href='trace_back.html'>trace_back()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Expressions within arguments count as contexts</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># returns 2</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `ctxt_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 27</div><div class='input'>
<span class='co'># But they are not part of the call stack because arguments are</span>
<span class='co'># evaluated within the calling function (or the global environment</span>
<span class='co'># if called at top level)</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>call_depth</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># returns 0</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 14</div><div class='input'>
<span class='co'># The context stacks includes all intervening execution frames. The</span>
<span class='co'># call stack doesn't:</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='fu'>f</span><span class='op'>(</span><span class='fu'>f</span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fe50dd8da50]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: f(ctxt_stack())
#&gt; env:  [local 0x7fe50dd8db68]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fe50dd8dc80]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: f(f(ctxt_stack()))
#&gt; env:  [local 0x7fe50dd8dd98]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dd8df58]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50dd8a278]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dd8a828]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50dd8ada0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50dd8b0e8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50dd8b430]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50dd8baf8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50dd8bd28]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dd8beb0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dd8bf90]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50dd7b900]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span><span class='op'>(</span><span class='fu'>f</span><span class='op'>(</span><span class='fu'>call_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_stack()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50dbaf1b0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='va'>g</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>cmd</span><span class='op'>)</span> <span class='fu'>cmd</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>f</span><span class='op'>(</span><span class='fu'>g</span><span class='op'>(</span><span class='va'>ctxt_stack</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: g(ctxt_stack)
#&gt; env:  [local 0x7fe50c3c40c0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fe50c3c41d8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: f(g(ctxt_stack))
#&gt; env:  [local 0x7fe50c3c42f0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50c3c44b0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50c3c46e0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50c3c4c90]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50c3c5208]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50c5a9640]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50c5a9988]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50c5aa050]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50c5aa280]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50c5aa408]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50c5aa4e8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50c3a5858]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span><span class='op'>(</span><span class='fu'>g</span><span class='op'>(</span><span class='va'>call_stack</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (23)
#&gt; expr: g(call_stack)
#&gt; env:  [local 0x7fe50c6dcd38]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50c768cc8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='co'># The rlang _stack() functions return a list of frame</span>
<span class='co'># objects. Use purrr::transpose() or index a field with</span>
<span class='co'># purrr::map()'s to extract a particular field from a stack:</span>

<span class='co'># stack &lt;- f(f(call_stack()))</span>
<span class='co'># purrr::map(stack, "env")</span>
<span class='co'># purrr::transpose(stack)$expr</span>

<span class='co'># current_frame() is an alias for ctxt_frame(1)</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>current <span class='op'>=</span> <span class='fu'>current_frame</span><span class='op'>(</span><span class='op'>)</span>, first <span class='op'>=</span> <span class='fu'>ctxt_frame</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `current_frame()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; $current
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn()
#&gt; env:  [local 0x7fe50c26f8f8]
#&gt; 
#&gt; $first
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn()
#&gt; env:  [local 0x7fe50c26f8f8]
#&gt; </div><div class='input'>
<span class='co'># While current_frame() is the top of the stack, global_frame() is</span>
<span class='co'># the bottom:</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span>
  <span class='fu'>ctxt_frame</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'>global_frame</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># ctxt_stack() returns a stack with all intervening frames. You can</span>
<span class='co'># trim layers of intervening frames with the trim argument:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: identity(ctxt_stack())
#&gt; env:  [local 0x7fe50dc3a110]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: identity(identity(ctxt_stack()))
#&gt; env:  [local 0x7fe50dc39ff8]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dc39e38]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50dc39c08]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dc39658]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50dc390e0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50dc44ca8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50dc44960]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50dc44298]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50dc44068]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dc43ee0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50dc43e00]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50dcbed50]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span>trim <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50ca07088]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50ca06e58]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50ca06870]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50ca0d5c8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50ca0cf00]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50ca103c8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50ca1b408]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50ca1b018]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50ca1a950]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50ca1e160]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50ca42bb8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># ctxt_stack() is called within fn() with intervening frames:</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span>trim <span class='op'>=</span> <span class='va'>trim</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (25)
#&gt; expr: identity(ctxt_stack(trim = trim))
#&gt; env:  [local 0x7fe50d0450e8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(identity(ctxt_stack(trim = trim)))
#&gt; env:  [local 0x7fe50d044f98]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn(0)
#&gt; env:  [local 0x7fe50d044e80]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50d044c50]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50d044a20]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50d044438]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50d047890]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50d0474d8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50d047158]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50d046898]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50d046630]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50d046470]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50d046278]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50d06a0e0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># We can trim the first layer of those:</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn(1)
#&gt; env:  [local 0x7fe50a7da790]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50a7e04e0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50a7e02b0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a7dfbb0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50a7df520]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50a7df1a0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50a7dee58]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50a7de790]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50a7e4470]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a7e42b0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a7e41d0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a7fa1d0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># The outside intervening frames (at the fn() call site) are still</span>
<span class='co'># returned, but can be trimmed as well:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: fn(1)
#&gt; env:  [local 0x7fe50a398078]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: identity(fn(1))
#&gt; env:  [local 0x7fe50a39be38]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: identity(identity(fn(1)))
#&gt; env:  [local 0x7fe50a39bd20]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50a39bb28]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50a39b8f8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a39b310]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50a39ad98]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50a39aa50]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50a39a708]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50a39dea8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50a39dc78]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a39daf0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50a39da10]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a3b5ea8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50b46c070]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50b471ce0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b4716f8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50b471180]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50b470d90]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50b470a48]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50b476d20]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50b476ab8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b478d20]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b478c40]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b490af0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='va'>g</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>g</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: g(2)
#&gt; env:  [local 0x7fe50bdc5848]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50bdc5688]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50bdc5420]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50bdc4e70]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50bdca7d0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50bdca488]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50bdca0d0]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50bdc99d0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50bdc97a0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50bdc95e0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50bdc9500]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50bde22c8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>g</span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50dfbe678]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fe50b330ff0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fe50b330dc0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b330810]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fe50b330260]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fe50b32ff18]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fe50b337ae0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fe50b337300]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fe50b3370d0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b336f48]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fe50b336e68]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b3514f8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fe5092ea130]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fe5092eb100]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fe5092fbcd0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fe5093a8638]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fe50b955b70]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50b955400]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fe50b977da0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509e4c590]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50a0ab4e8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fe509506c68]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fe50950baa0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fe506265bf0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


