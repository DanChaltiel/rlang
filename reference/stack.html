<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Call stack information — stack • rlang</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Call stack information — stack" />
<meta property="og:description" content="
The eval_ and call_ families of functions provide a replacement
for the base R functions prefixed with sys. (which are all about
the context stack), as well as for parent.frame() (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rlang</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.8.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../reference/lifecycle.html">Life cycle</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/02/glue-strings-and-tidy-eval/">Version 0.4.3</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/06/rlang-0-4-0/">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/rlang-0-3-1/">Version 0.3.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/10/rlang-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/03/rlang-0.2.0/">Version 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/rlang/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Call stack information</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/rlang/blob/master/R/lifecycle-retired.R'><code>R/lifecycle-retired.R</code></a></small>
    <div class="hidden name"><code>stack.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><img src='figures/lifecycle-deprecated.svg' alt='Deprecated lifecycle' /></p>
<p>The <code>eval_</code> and <code>call_</code> families of functions provide a replacement
for the base R functions prefixed with <code>sys.</code> (which are all about
the context stack), as well as for <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame()</a></code> (which is the
only base R function for querying the call stack). The context
stack includes all R-level evaluation contexts. It is linear in
terms of execution history but due to lazy evaluation it is
potentially nonlinear in terms of call history. The call stack
history, on the other hand, is homogenous.</p>
    </div>

    <pre class="usage"><span class='fu'>global_frame</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>current_frame</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ctxt_frame</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>call_frame</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span>, clean <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>call_depth</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>ctxt_stack</span><span class='op'>(</span>n <span class='op'>=</span> <span class='cn'>NULL</span>, trim <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>

<span class='fu'>call_stack</span><span class='op'>(</span>n <span class='op'>=</span> <span class='cn'>NULL</span>, clean <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n</th>
      <td><p>The number of frames to go back in the stack.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Whether to post-process the call stack to clean
non-standard frames. If <code>TRUE</code>, suboptimal call-stack entries by
<code><a href='https://rdrr.io/r/base/eval.html'>base::eval()</a></code> will be cleaned up: the duplicate frame created by
<code><a href='https://rdrr.io/r/base/eval.html'>eval()</a></code> is eliminated.</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>The number of layers of intervening frames to trim off
the stack. See <code><a href='stack_trim.html'>stack_trim()</a></code> and examples.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ctxt_frame()</code> and <code>call_frame()</code> return a <code>frame</code> object
containing the following fields: <code>expr</code> and <code>env</code> (call expression
and evaluation environment), <code>pos</code> and <code>caller_pos</code> (position of
current frame in the context stack and position of the caller), and
<code>fun</code> (function of the current frame). <code>ctxt_stack()</code> and
<code>call_stack()</code> return a list of all context or call frames on the
stack. Finally, <code>ctxt_depth()</code> and <code>call_depth()</code> report the
current context position or the number of calling frames on the
stack.</p>
<p>The base R functions take two sorts of arguments to indicate which
frame to query: <code>which</code> and <code>n</code>. The <code>n</code> argument is
straightforward: it's the number of frames to go down the stack,
with <code>n = 1</code> referring to the current context. The <code>which</code> argument
is more complicated and changes meaning for values lower than 1.
For the sake of consistency, the rlang functions all take the
same kind of argument <code>n</code>. This argument has a single meaning (the
number of frames to go down the stack) and cannot be lower than 1.</p>
<p>Note finally that <code><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame(1)</a></code> corresponds to
<code>call_frame(2)$env</code>, as <code>n = 1</code> always refers to the current
frame. This makes the <code>_frame()</code> and <code>_stack()</code> functions
consistent: <code>ctxt_frame(2)</code> is the same as <code>ctxt_stack()[[2]]</code>.
Also, <code>ctxt_depth()</code> returns one more frame than
<code><a href='https://rdrr.io/r/base/sys.parent.html'>base::sys.nframe()</a></code> because it counts the global frame. That is
consistent with the <code>_stack()</code> functions which return the global
frame as well. This way, <code>call_stack(call_depth())</code> is the same as
<code>global_frame()</code>.</p>
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    


<p>These functions are soft-deprecated and replaced by <code><a href='trace_back.html'>trace_back()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Expressions within arguments count as contexts</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># returns 2</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `ctxt_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 27</div><div class='input'>
<span class='co'># But they are not part of the call stack because arguments are</span>
<span class='co'># evaluated within the calling function (or the global environment</span>
<span class='co'># if called at top level)</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>call_depth</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># returns 0</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_depth()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [1] 14</div><div class='input'>
<span class='co'># The context stacks includes all intervening execution frames. The</span>
<span class='co'># call stack doesn't:</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='fu'>f</span><span class='op'>(</span><span class='fu'>f</span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 28&gt; (27)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fd905f5f2b0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: f(ctxt_stack())
#&gt; env:  [local 0x7fd905f5f198]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fd905f5f080]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: f(f(ctxt_stack()))
#&gt; env:  [local 0x7fd905f5ef68]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd905f5eda8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd905f5eb78]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd905f5e5c8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd905f5e050]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd905f5dd08]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd905f5d9c0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd905f79208]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd905f78fd8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd905f78e50]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd905f78d70]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd905fe5b48]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[29]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span><span class='op'>(</span><span class='fu'>f</span><span class='op'>(</span><span class='fu'>call_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `call_stack()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90abd4f80]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='va'>g</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>cmd</span><span class='op'>)</span> <span class='fu'>cmd</span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>f</span><span class='op'>(</span><span class='fu'>g</span><span class='op'>(</span><span class='va'>ctxt_stack</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: g(ctxt_stack)
#&gt; env:  [local 0x7fd90b93b908]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(x)
#&gt; env:  [local 0x7fd90b93b7f0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: f(g(ctxt_stack))
#&gt; env:  [local 0x7fd90b93b668]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90b93b4a8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90b93b278]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b93ac58]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90b93a670]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90b9421c8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90b941da0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90b941668]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90b941438]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b9412b0]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b9411d0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90b9614e0]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>f</span><span class='op'>(</span><span class='fu'>g</span><span class='op'>(</span><span class='va'>call_stack</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (23)
#&gt; expr: g(call_stack)
#&gt; env:  [local 0x7fd90b5d4f38]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90b5eeb10]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "call_stack" "stack"     </div><div class='input'>
<span class='co'># The rlang _stack() functions return a list of frame</span>
<span class='co'># objects. Use purrr::transpose() or index a field with</span>
<span class='co'># purrr::map()'s to extract a particular field from a stack:</span>

<span class='co'># stack &lt;- f(f(call_stack()))</span>
<span class='co'># purrr::map(stack, "env")</span>
<span class='co'># purrr::transpose(stack)$expr</span>

<span class='co'># current_frame() is an alias for ctxt_frame(1)</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>current <span class='op'>=</span> <span class='fu'>current_frame</span><span class='op'>(</span><span class='op'>)</span>, first <span class='op'>=</span> <span class='fu'>ctxt_frame</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `current_frame()` is deprecated as of rlang 0.3.0.</span>
#&gt; <span class='warning'></span><span style='color: #555555;'>This warning is displayed once per session.</span><span></span></div><div class='output co'>#&gt; $current
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn()
#&gt; env:  [local 0x7fd90b320ef8]
#&gt; 
#&gt; $first
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn()
#&gt; env:  [local 0x7fd90b320ef8]
#&gt; </div><div class='input'>
<span class='co'># While current_frame() is the top of the stack, global_frame() is</span>
<span class='co'># the bottom:</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fu'>ctxt_depth</span><span class='op'>(</span><span class='op'>)</span>
  <span class='fu'>ctxt_frame</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'>global_frame</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>

<span class='co'># ctxt_stack() returns a stack with all intervening frames. You can</span>
<span class='co'># trim layers of intervening frames with the trim argument:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: identity(ctxt_stack())
#&gt; env:  [local 0x7fd90b0fdf98]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: identity(identity(ctxt_stack()))
#&gt; env:  [local 0x7fd90b0fde80]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90b0fdc88]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90b0fda58]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b0fd4a8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90b0fcec0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90b0fcb78]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90b0fc7f8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90b102008]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90b101dd8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b101b00]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90b1019e8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90b1274e0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span>trim <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd909f10748]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd909f104e0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd909f0fe88]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd909f0f910]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd909f0f5c8]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd909f13158]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd909f12a58]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd909f127f0]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd909f12630]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd909f12550]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909f36320]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># ctxt_stack() is called within fn() with intervening frames:</span>
<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>ctxt_stack</span><span class='op'>(</span>trim <span class='op'>=</span> <span class='va'>trim</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (25)
#&gt; expr: identity(ctxt_stack(trim = trim))
#&gt; env:  [local 0x7fd90a8d90e8]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (25)
#&gt; expr: identity(identity(ctxt_stack(trim = trim)))
#&gt; env:  [local 0x7fd90a8d8fd0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn(0)
#&gt; env:  [local 0x7fd90a8d8cf8]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90a8d8b00]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90a8d8898]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90a8d8278]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90a8dbc10]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90a8db8c8]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90a8db580]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90a8daeb8]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90a8dac18]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90a8daa90]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90a8da9b0]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90a8ee278]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># We can trim the first layer of those:</span>
<span class='fu'>fn</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: fn(1)
#&gt; env:  [local 0x7fd909b17200]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd909b17040]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd909b16da0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd909b167f0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd909b16240]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd909b15ef8]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd909b15b78]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd909b18470]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd909b18208]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd909b18080]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd909b17fa0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909b3d670]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='co'># The outside intervening frames (at the fn() call site) are still</span>
<span class='co'># returned, but can be trimmed as well:</span>
<span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 27&gt; (24)
#&gt; expr: fn(1)
#&gt; env:  [local 0x7fd907dd6548]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 26&gt; (24)
#&gt; expr: identity(fn(1))
#&gt; env:  [local 0x7fd907dd6388]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: identity(identity(fn(1)))
#&gt; env:  [local 0x7fd907dd6238]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd907dd9dc8]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd907dd9b60]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd907dd93f0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd907dd8d98]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd907dd8970]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd907dd83c0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd907ddb7e0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd907ddb540]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd907ddb230]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd907ddb070]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907df82d8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[27]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[28]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90701c478]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90701c1a0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90701bb10]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90701b448]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90701b090]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90701aca0]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90701e280]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90701df70]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90701ddb0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90701dcd0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907054638]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'>
<span class='va'>g</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identity.html'>identity</a></span><span class='op'>(</span><span class='fu'>fn</span><span class='op'>(</span><span class='va'>trim</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>g</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 25&gt; (24)
#&gt; expr: g(2)
#&gt; env:  [local 0x7fd90f433c00]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90f433dc0]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90f433ff0]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f4345a0]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90f434b18]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90f434e60]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90f4351a8]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90f435870]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90f431b90]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f431d18]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f431df8]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f4114e8]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[26]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div><div class='input'><span class='fu'>g</span><span class='op'>(</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt; &lt;frame 24&gt; (23)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90bd755d0]
#&gt; 
#&gt; [[2]]
#&gt; &lt;frame 23&gt; (13)
#&gt; expr: eval(expr, envir, enclos)
#&gt; env:  [local 0x7fd90f350f30]
#&gt; 
#&gt; [[3]]
#&gt; &lt;frame 22&gt; (13)
#&gt; expr: withVisible(eval(expr, envir, enclos))
#&gt; env:  [local 0x7fd90f351160]
#&gt; 
#&gt; [[4]]
#&gt; &lt;frame 21&gt; (13)
#&gt; expr: withCallingHandlers(withVisible(eval(expr, envir, enclos)), warning = wHandler,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f34d800]
#&gt; 
#&gt; [[5]]
#&gt; &lt;frame 20&gt; (19)
#&gt; expr: doTryCatch(return(expr), name, parentenv, handler)
#&gt; env:  [local 0x7fd90f34dd78]
#&gt; 
#&gt; [[6]]
#&gt; &lt;frame 19&gt; (18)
#&gt; expr: tryCatchOne(expr, names, parentenv, handlers[[1L]])
#&gt; env:  [local 0x7fd90f34e0c0]
#&gt; 
#&gt; [[7]]
#&gt; &lt;frame 18&gt; (17)
#&gt; expr: tryCatchList(expr, classes, parentenv, handlers)
#&gt; env:  [local 0x7fd90f34e408]
#&gt; 
#&gt; [[8]]
#&gt; &lt;frame 17&gt; (16)
#&gt; expr: tryCatch(expr, error = function(e) { &lt;...&gt;
#&gt; env:  [local 0x7fd90f34eb08]
#&gt; 
#&gt; [[9]]
#&gt; &lt;frame 16&gt; (15)
#&gt; expr: try(f, silent = TRUE)
#&gt; env:  [local 0x7fd90f34ed38]
#&gt; 
#&gt; [[10]]
#&gt; &lt;frame 15&gt; (13)
#&gt; expr: handle(ev &lt;- withCallingHandlers(withVisible(eval(expr, envir,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f34eec0]
#&gt; 
#&gt; [[11]]
#&gt; &lt;frame 14&gt; (13)
#&gt; expr: timing_fn(handle(ev &lt;- withCallingHandlers(withVisible(eval(expr,  &lt;...&gt;
#&gt; env:  [local 0x7fd90f34efa0]
#&gt; 
#&gt; [[12]]
#&gt; &lt;frame 13&gt; (12)
#&gt; expr: evaluate_call(expr, parsed$src[[i]], envir = envir, enclos = enclos,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f335cd0]
#&gt; 
#&gt; [[13]]
#&gt; &lt;frame 12&gt; (11)
#&gt; expr: evaluate::evaluate(code, child_env(env), new_device = TRUE)
#&gt; env:  [frame 0x7fd90ddd5588]
#&gt; 
#&gt; [[14]]
#&gt; &lt;frame 11&gt; (10)
#&gt; expr: downlit::evaluate_and_highlight(code, fig_save = fig_save_topic,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90ddd1eb8]
#&gt; 
#&gt; [[15]]
#&gt; &lt;frame 10&gt; (9)
#&gt; expr: highlight_examples(code, topic, env = env)
#&gt; env:  [frame 0x7fd90ddc5438]
#&gt; 
#&gt; [[16]]
#&gt; &lt;frame 9&gt; (8)
#&gt; expr: run_examples(tags$tag_examples[[1]], env = new.env(parent = globalenv()),  &lt;...&gt;
#&gt; env:  [frame 0x7fd90be0a0c0]
#&gt; 
#&gt; [[17]]
#&gt; &lt;frame 8&gt; (6)
#&gt; expr: data_reference_topic(topic, pkg, examples = examples, run_dont_run = run_dont_run)
#&gt; env:  [frame 0x7fd90f24fba8]
#&gt; 
#&gt; [[18]]
#&gt; &lt;frame 7&gt; (6)
#&gt; expr: withCallingHandlers(data_reference_topic(topic, pkg, examples = examples,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90f2502a8]
#&gt; 
#&gt; [[19]]
#&gt; &lt;frame 6&gt; (5)
#&gt; expr: .f(.x[[i]], ...)
#&gt; env:  [frame 0x7fd90f31ccc8]
#&gt; 
#&gt; [[20]]
#&gt; &lt;frame 5&gt; (4)
#&gt; expr: purrr::map(topics, build_reference_topic, pkg = pkg, lazy = lazy,  &lt;...&gt;
#&gt; env:  [frame 0x7fd907acbcd0]
#&gt; 
#&gt; [[21]]
#&gt; &lt;frame 4&gt; (3)
#&gt; expr: build_reference(pkg, lazy = lazy, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd9058c5908]
#&gt; 
#&gt; [[22]]
#&gt; &lt;frame 3&gt; (2)
#&gt; expr: build_site_local(pkg = pkg, examples = examples, run_dont_run = run_dont_run,  &lt;...&gt;
#&gt; env:  [frame 0x7fd90911fda0]
#&gt; 
#&gt; [[23]]
#&gt; &lt;frame 2&gt; (1)
#&gt; expr: build_site(pkg, devel = FALSE, preview = FALSE, install = FALSE,  &lt;...&gt;
#&gt; env:  [frame 0x7fd909120600]
#&gt; 
#&gt; [[24]]
#&gt; &lt;frame 1&gt; (0)
#&gt; expr: pkgdown::deploy_to_branch(new_process = FALSE)
#&gt; env:  [frame 0x7fd907f8dd10]
#&gt; 
#&gt; [[25]]
#&gt; &lt;frame 0&gt; [global]
#&gt; expr: NULL
#&gt; env:  [global]
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "ctxt_stack" "stack"     </div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


